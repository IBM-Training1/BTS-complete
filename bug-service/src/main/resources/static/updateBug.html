<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="updateBug.css">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<title>Update Bug</title>
<script type="text/javascript">
	function updateBugStatus() {
		function success(response) {
			if (!response.ok) {
				alert('Invalid Status');
				return;
			}
			alert("Bug has been updated!");
			return response.json();
		}
		const updateBug = document.getElementById('updateBug');
		if (!updateBug.checkValidity()) {
			alert('form is invalid');
			return;
		}
		let id = document.getElementById('bugId').value;
		const promise = fetch('/bug/' + id, {
			method : 'PUT',
			headers : {
				'Content-Type' : 'application/json'
			},
			body : JSON.stringify({

				status : document.getElementById('cars').value,
				description : document.getElementById('description').value,

			})
		});
		promise.then(success);

	}
</script>
</head>
<body>
	<header class="header">
		<nav class="navbar navbar-style">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse"
						data-target="#menu">
						<span class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<a href=""><img class="logo" src="logo.png"></a>
				</div>
				<div class="collapse navbar-collapse" id="menu">
					<ul class="nav navbar-nav navbar-right">
						<li><a href="index.html">Home</a></li>
						<li><a href="aboutUs.html">About Us</a></li>
						<li><a href="contactUs.html">Help</a></li>
					</ul>
				</div>
			</div>

		</nav>

	</header>
	<form id="updateBug">
		<div class="background">
			<br> <br>
			<div class="center" id="box">
				<table class="table">
					<tr>
						<td>Bug Id:<span style="color:red">*</span></td>
						<td><input id="bugId" placeholder="Enter Bug ID" required></td>
					</tr>
					<tr>
						<td>Description<span style="color:red">*</span></td>
						<td><textarea minlength="5" maxlength="100"
								class="form-control"
								placeholder="Please type your comment in less than 100 characters"
								required id="description"></textarea></td>
					</tr>
					<tr>
						<td>Status:<span style="color:red">*</span></td>
						<td><select id="cars" required>
								<option value="" disabled selected>Choose value</option>
								<option value="NEW">NEW</option>
								<option value="OPEN">OPEN</option>
								<option value="FIXED">FIXED</option>
								<option value="ASSIGNED">ASSIGNED</option>
								<option value="PENDING_REQUEST">PENDING_REQUEST</option>
								<option value="RETEST">RETEST</option>
								<option value="REOPEN">REOPEN</option>
								<Option value="CLOSED">CLOSED</Option>
								<option value="VERIFIED">VERIFIED</option>
								<option value="DEFERRED">DEFERRED</option>
								<option value="DUPLICATE">DUPLICATE</option>
								<option value="NEED_MORE_INFO">NEED_MORE_INFO</option>
								<option value="WONT_FIX">WONT_FIX</option>
								<option value="REJECTED">REJECTED</option>
								<option value="NOT_A_BUG">NOT_A_BUG</option>
						</select></td>
					</tr>
				</table>

				<a class="btn btn-first" onclick="updateBugStatus()">Update Bug</a>
			</div>


		</div>


	</form>

	<footer class="page-footer font-small blue" id="footer">

		<div class="footer-copyright text-center py-3">
			<small>Â© 2021 Copyright ServerMonks</small>

		</div>

	</footer>

</body>

</html>