<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="getBug.css">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<title>Search Bug</title>
<script>
	function getBug() {
		const getBug = document.getElementById('getBug');
		if (!getBug.checkValidity()) {
			alert('form is invalid');
			return;
		}
		let id = document.getElementById('bugId').value;
		id = id.trim();
		if (bugId) {
			const promise = fetch('/bug/' + id);
			promise.then(function(response) {
				return response.json();
			}).then(function(bug) {
				if (bug) {
					const table = document.getElementById('bugsTable');
					const rows=table.children.length;
					for(let count=0;count<rows;count++){
						table.children[0].remove();
					}
					const row = document.createElement('tr');
					const nameColumn = document.createElement('td');
					//const descriptionColumn = document.createElement('td');
					const statusColumn = document.createElement('td');
					const priorityColumn = document.createElement('td');
					const typeColumn = document.createElement('td');
					const submittedOnColumn = document.createElement('td');
					const synopsisColumn = document.createElement('td');
					const severityColumn = document.createElement('td');
					const projectIdColumn = document.createElement('td');
					const moduleColumn = document.createElement('td');
					const productColumn = document.createElement('td');
					const etaColumn = document.createElement('td');

					nameColumn.append(bug.name);
					//descriptionColumn.append(bug.description);
					statusColumn.append(bug.status);
					priorityColumn.append(bug.priority);
					typeColumn.append(bug.type);
					submittedOnColumn.append(bug.submittedOn);
					synopsisColumn.append(bug.synopsis);
					severityColumn.append(bug.severity);
					projectIdColumn.append(bug.projectId);
					moduleColumn.append(bug.module);
					productColumn.append(bug.product);
					etaColumn.append(bug.eta);
					row.appendChild(nameColumn);
					//row.appendChild(descriptionColumn);
					row.appendChild(statusColumn);
					row.appendChild(priorityColumn);
					row.appendChild(typeColumn);
					row.appendChild(submittedOnColumn);
					row.appendChild(synopsisColumn);
					row.appendChild(severityColumn);
					row.appendChild(projectIdColumn);
					row.appendChild(moduleColumn);
					row.appendChild(productColumn);
					row.appendChild(etaColumn);

					table.appendChild(row);
				} else {
					alert("invalid bug Id");
				}
			});

		} else {
			alert("invalid Bug Id");
		}
	}
</script>
</head>

<body>
	<header class="header">
		<nav class="navbar navbar-style">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse"
						data-target="#menu">
						<span class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<a href=""><img class="logo" src="logo.png"></a>
				</div>
				<div class="collapse navbar-collapse" id="menu">
					<ul class="nav navbar-nav navbar-right">
						<li><a href="index.html">Home</a></li>
						<li><a href="aboutUs.html">About Us</a></li>
						<li><a href="contactUs.html">Help</a></li>
					</ul>
				</div>
			</div>

		</nav>
	</header>
	<div class="background">
		<br>

		<div class="center" id="box">
			<form id="getBug">
				<table class="table">
					<tr>
						<td>Bug Id:</td>
						<td><input id="bugId" placeholder="" required></td>
					</tr>
				</table>
				<h6>Required field</h6>
				<a class="btn btn-first" onclick="getBug()" href="#">Search</a>
		</div>
		<br> <br>
		<div class="table-responsive">

			<table class=" table table-bordered "
				style="border: 2px solid #000000; margin-top: 50px">
				<thead style="background-color:grey; color:white">
					<td scope="col" style="border: 2px solid #000000;">Name</td>
					<td scope="col" style="border: 2px solid #000000;">Status</td>
					<td scope="col" style="border: 2px solid #000000;">Priority</td>
					<td scope="col" style="border: 2px solid #000000;">Type</td>
					<td scope="col" style="border: 2px solid #000000;">SubmittedOn</td>
					<td scope="col" style="border: 2px solid #000000;">Synopsis</td>
					<td scope="col" style="border: 2px solid #000000;">Severity</td>
					<td scope="col" style="border: 2px solid #000000;">ProjectId</td>
					<td scope="col" style="border: 2px solid #000000;">Module</td>
					<td scope="col" style="border: 2px solid #000000;">Product</td>
					<td scope="col" style="border: 2px solid #000000;">Estimated Date</td>
				</thead>
				<tbody id='bugsTable' style="border: 2px solid #000000;"></tbody>
			</table>
		</div>
		<br> <br>
		</form>
		<br>
		<footer class="page-footer font-small blue" id="footer">

			<div class="footer-copyright text-center py-3">
				<small>Â© 2021 Copyright ServerMonks</small>

			</div>

		</footer>
	</div>
</body>

</html>